{% extends 'base.html.twig' %}
{% block title %}
    {{ title }}
{% endblock %}

{% block breadcrumbs %}
    <li>
        <a href="{{ path('homepage') }}">Home</a>
        <i class="fa fa-circle"></i>
    </li>
    <li>
        <a href="{{ path('student_list') }}">Students</a>
        <i class="fa fa-circle"></i>
    </li>
    <li>
        <span>{{ observation.student.studentId }}</span>
        <i class="fa fa-circle"></i>
    </li>
    <li>
        <a href="{{ path('observation_student_list', { 'id': observation.student.id }) }}">Observations</a>
        <i class="fa fa-circle"></i>
    </li>
    <li>
        <span>{{ observation.name }}</span>
        <i class="fa fa-circle"></i>
    </li>
    <li>
        <a href="{{ path('data_analysis', { 'id': observation.student.id }) }}">Data analysis</a>
        <i class="fa fa-circle"></i>
    </li>
    <li>
        <span>New aggregated index</span>
    </li>
{% endblock %}

{% block body %}
    <div class="row">
        <div class="col-md-12 col-sm-12">

        </div>
    <div class="row">
        <div class="col-md-6 col-sm-12">
            <div class="portlet light portlet-fit bordered">
                <div class="portlet-title">
                    <div class="caption">
                        <i class="icon-directions font-green hide"></i>
                        <span class="caption-subject bold font-dark uppercase "> Item to be aggregated</span>
                    </div>
                </div>

                <div class="portlet-body">
                    <div class="mt-element-step">
                        <div class="row step-thin">
                            <div class="slider slider-nav">
                                {% for key, itemValues in items[0] %}
                                    <div class="col-lg-12 bg-grey mt-step-col item-container" data-item-id="{{ key | split('-') | last }}">
                                        <div class="mt-step-number first bg-white font-grey">{{ loop.index }}</div>
                                        <div class="mt-step-title uppercase font-grey-cascade">{{ itemValues.label }}

                                            {% if(itemValues.typology != 'choice') %}
                                                <div class="pull-right">
                                                    <input type="checkbox" name="my-checkbox" checked>
                                                </div>
                                            {% endif %}
                                        </div>
                                        <div class="mt-step-content font-grey-cascade"></div>
                                    </div>
                                {% endfor %}

                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-md-6 col-sm-12">
            <div class="portlet light portlet-fit bordered">
                <div class="portlet-title">
                    <div class="caption">
                        <i class="icon-directions font-green hide"></i>
                        <span class="caption-subject bold font-dark uppercase "> Operation</span>
                    </div>
                </div>

                <div class="portlet-body">
                    <div class="mt-element-step">
                        <div class="row step-thin">
                            <div class="slider slider-nav">
                                <div class="col-lg-12 bg-grey mt-step-col operation-container" data-operation="sum">
                                    <div class="mt-step-number first bg-white font-grey">1</div>
                                    <div class="mt-step-title uppercase font-grey-cascade">Sum</div>
                                    <div class="mt-step-content font-grey-cascade">The selected items will be aggregated adding their raw data.</div>
                                </div>

                                <div class="col-lg-12 bg-grey mt-step-col operation-container" data-operation="sum">
                                    <div class="mt-step-number first bg-white font-grey">2</div>
                                    <div class="mt-step-title uppercase font-grey-cascade">Mean</div>
                                    <div class="mt-step-content font-grey-cascade">The selected items will be aggregated calculting their mean.</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

{% endblock %}

{% block javascripts %}
    {{ parent() }}

    <script>
        $("[name='my-checkbox']").bootstrapSwitch();

        $('.item-container').on('click', function () {
            if ($(this).hasClass('active')) {
                $(this).removeClass('active');
            } else {
                $(this).addClass('active');
            }
        });

        $('.operation-container').on('click', function () {

            $('.operation-container').each(function(){
                $(this).removeClass('active');
            });

            if ($(this).hasClass('active')) {
                $(this).removeClass('active');
            } else {
                $(this).addClass('active');
            }

        });
    </script>
{% endblock %}